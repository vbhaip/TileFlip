{"version":3,"sources":["reportWebVitals.js","Visualization.js","App.js","MoreInfo.js","Router.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","Visualization","props","state","data","interval","ready","existingBlobs","time","updateVis","bind","computeNextState","computeVal","computeNeighbors","mod","floatToGrayscale","floatToHSL","refresh","setup","drawChart","flipItem","gif","GIF","workers","quality","repeat","workerScript","debug","addGifItem","this","edgeLength","size","i","push","index","x","y","Math","floor","color","animate","invert","store","setState","margin","top","bottom","left","right","xScale","d3","domain","range","yScale","squareLength","console","log","initdata","Object","entries","forEach","key","val","parseInt","parseFloat","e","viscontainer","selectAll","filter","d","transition","duration","refreshRate","ease","attr","a","b","up","down","rawleft","rawright","upleft","downleft","Number","toString","slice","round","prevState","map","item","tempitem","neighbors","ctx","upright","downright","board","curr","ones","length","zeroes","corners","sides","float_to_color","resolution","t","value","rule","isNaN","updateVisDiscreteFlip","svg","id","remove","append","outerthis","enter","isMobile","on","isDown","play","setTimeout","prevProps","toExport","toFixed","setExportInitData","JSON","stringify","URL","revokeObjectURL","setGifURL","frames","render","blob","gifURL","createObjectURL","type","concat","img","Image","serialized","XMLSerializer","serializeToString","node","Blob","url","onload","addFrame","delay","copy","src","React","Component","App","handleRuleChange","handleRuleChangeAce","updateResolution","handlePlayChange","shareURL","updateRefresh","setStateFromQuery","progressExample","rawquery","window","location","search","hash","includes","indexOf","query","qs","parse","fetch","response","text","examples","split","curr_example","keys","editorVal","base64url","decode","code","initrule","getFunctionFromString","exportInitData","viswidth","innerWidth","editorwidth","fontSize","innerHeight","newExampleInd","replace","error","f","target","encode","params","exportQs","currURL","newURL","lastIndexOf","history","pushState","prompt","className","style","theme","palette","lightText","main","fontFamily","typography","Slider","defaultValue","valueLabelDisplay","step","marks","min","max","width","onChange","Button","variant","onClick","href","download","disabled","mode","name","showPrintMargin","showGutter","highlightActiveLine","height","setOptions","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets","showLineNumbers","tabSize","withTheme","MoreInfo","marginLeft","marginRight","plugins","gfm","textAlign","marginTop","createMuiTheme","primary","secondary","warning","black","Router","exact","path","ThemeProvider","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bf25b85c.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport * as d3 from 'd3';\n// import 'gif.js'\nimport GIF from 'gif.js';\n\nclass Visualization extends React.Component {\n  // props\n  // this.edgeLength = edge length of number of shapes per side\n  // id\n  // this.size = pixel length\n\n  constructor (props) {\n    super(props);\n\n    this.state = {\n      data: [],\n      interval: null,\n      ready: false,\n      existingBlobs: [],\n      time: 0\n    };\n\n    this.updateVis = this.updateVis.bind(this);\n\n    this.computeNextState = this.computeNextState.bind(this);\n\n    this.computeVal = this.computeVal.bind(this);\n    this.computeNeighbors = this.computeNeighbors.bind(this);\n\n    this.mod = this.mod.bind(this);\n    this.floatToGrayscale = this.floatToGrayscale.bind(this);\n    this.floatToHSL = this.floatToHSL.bind(this);\n\n    this.refresh = this.refresh.bind(this);\n\n    this.setup = this.setup.bind(this);\n    this.drawChart = this.drawChart.bind(this);\n\n    this.flipItem = this.flipItem.bind(this);\n\n    this.setup();\n    this.refresh();\n\n    this.gif = new GIF({\n      workers: 3,\n      quality: 1,\n      repeat: 0,\n      workerScript: process.env.PUBLIC_URL + '/gif.worker.js',\n      debug: true\n    });\n\n    this.addGifItem = this.addGifItem.bind(this);\n  }\n\n  setup () {\n    const data = [];\n\n    this.edgeLength = this.props.edgeLength;\n    this.size = this.props.size;\n\n    for (let i = 0; i < this.edgeLength ** 2; i++) {\n      data.push({\n        index: i,\n        x: i % this.edgeLength,\n        y: Math.floor(i / this.edgeLength),\n        state: 0,\n        color: '',\n        animate: false,\n        invert: false,\n        store: {}\n      });\n    }\n\n    this.setState({ data: data, time: 0 });\n\n    this.margin = { top: this.edgeLength * 0.1, bottom: this.edgeLength * 0.1, left: this.edgeLength * 0.1, right: this.edgeLength * 0.1 };\n\n    this.xScale = d3.scaleLinear()\n      .domain([0, this.edgeLength])\n      .range([this.margin.left, this.size - this.margin.right]);\n\n    this.yScale = d3.scaleLinear()\n      .domain([0, this.edgeLength])\n      .range([this.margin.top, this.size - this.margin.bottom]);\n\n    this.squareLength = this.size / this.edgeLength;\n\n    // adjust vals for init data\n    console.log(this.props.initdata);\n    Object.entries(this.props.initdata).forEach(([key, val]) => {\n      try {\n        data[parseInt(key)].state = parseFloat(val);\n      } catch (e) {\n        console.log(e);\n      }\n    });\n\n    return data;\n  }\n\n  updateVis () {\n    // for elements that want to transition\n    this.viscontainer\n      .selectAll('.main-rect')\n      .data(this.state.data)\n    // .attr(\"fill\", (d,i) => {return this.floatToGrayscale(d.state)})\n      .filter((d, i) => d.animate)\n      .transition()\n      .duration((d, i) => {\n        // console.log(d.animate);\n        return this.props.refreshRate;\n      })\n      .ease(d3.easeLinear)\n      .attr('fill', (d, i) => {\n        return d.color === '' ? 'black' : d.color;\n      })\n      .attr('fill-opacity', (d, i) => { return !d.invert ? d.state : 1 - d.state; });\n\n    // for elements to just discretely turn on and off\n    this.viscontainer\n      .selectAll('.main-rect')\n      .data(this.state.data)\n    // .attr(\"fill\", (d,i) => {return this.floatToGrayscale(d.state)})\n      .filter((d, i) => !d.animate)\n      .attr('fill', (d, i) => {\n        return d.color === '' ? 'black' : d.color;\n      })\n      .attr('fill-opacity', (d, i) => { return !d.invert ? d.state : 1 - d.state; });\n  }\n\n  updateVisDiscreteFlip () {\n    this.viscontainer\n      .selectAll('.main-rect')\n      .data(this.state.data)\n      .attr('fill', (d, i) => {\n        return d.color === '' ? 'black' : d.color;\n      })\n      .attr('fill-opacity', (d, i) => { return !d.invert ? d.state : 1 - d.state; });\n  }\n\n  computeVal (index) {\n    if (index < 0 || index >= this.edgeLength ** 2) {\n      return -1;\n    } else {\n      // console.log(this.state.data[index].state)\n      return this.state.data[index].state;\n    }\n  }\n\n  mod (a, b) {\n    // needed otherwise -1 % 8  = -1\n    return ((a % b) + b) % b;\n  }\n\n  computeNeighbors (index) {\n    // goal is to return list of neighbors in formate\n    // [up, right, down, left]\n    // return actual vals\n    // wraps around to other side\n\n    // let r = Math.floor(index/this.edgeLength);\n    // let c = index%edgeLength\n\n    const up = this.computeVal(this.mod((index - this.edgeLength), (this.edgeLength ** 2)));\n    const down = this.computeVal(this.mod((index + this.edgeLength), (this.edgeLength ** 2)));\n\n    const rawleft = index % this.edgeLength === 0 ? index + this.edgeLength - 1 : index - 1;\n    const left = this.computeVal(rawleft);\n\n    const rawright = (index + 1) % this.edgeLength === 0 ? index - this.edgeLength + 1 : index + 1;\n    const right = this.computeVal(rawright);\n\n    const upleft = this.computeVal(this.mod((rawleft - this.edgeLength), (this.edgeLength ** 2)));\n    const downleft = this.computeVal(this.mod((rawleft + this.edgeLength), (this.edgeLength ** 2)));\n\n    const upright = this.computeVal(this.mod((rawright - this.edgeLength), (this.edgeLength ** 2)));\n    const downright = this.computeVal(this.mod((rawright + this.edgeLength), (this.edgeLength ** 2)));\n\n    return [upleft, up, upright, right, downright, down, downleft, left];\n  }\n\n  floatToGrayscale (val) {\n    // https://stackoverflow.com/questions/16179713/converting-float-values-to-a-grayscale-hex-color-value\n    // console.log(val)\n    const dec = 255 * (1 - val);\n    const encoding = ('0' + Number(parseInt(dec, 10)).toString(16)).slice(-2);\n    // console.log(\"#\" + encoding.repeat(3))\n    return '#' + encoding.repeat(3);\n  }\n\n  floatToHSL (val) {\n    return 'hsl(' + Math.round(360 * (val % 1)) + ', 100%, 50%)';\n  }\n\n  computeNextState () {\n    this.setState((prevState) => {\n      const newState = prevState.data.map((item, index) => {\n        const tempitem = { ...item };\n\n        const neighbors = this.computeNeighbors(index);\n\n        const ctx = {};\n\n        ctx.upleft = neighbors[0];\n        ctx.up = neighbors[1];\n        ctx.upright = neighbors[2];\n        ctx.right = neighbors[3];\n        ctx.downright = neighbors[4];\n        ctx.down = neighbors[5];\n        ctx.downleft = neighbors[6];\n        ctx.left = neighbors[7];\n\n        ctx.neighbors = neighbors;\n        ctx.board = prevState.data.map(x => x.state);\n\n        // console.log(neighbors)\n\n        ctx.curr = item.state;\n        ctx.ones = neighbors.filter(x => x === 1).length;\n        ctx.zeroes = neighbors.filter(x => x === 0).length;\n        ctx.corners = neighbors.filter((x, i) => { return x === 1 && (i % 2 === 0); }).length;\n        ctx.sides = neighbors.filter((x, i) => { return x === 1 && (i % 2 === 1); }).length;\n\n        ctx.index = index;\n        ctx.x = item.x;\n        ctx.y = item.y;\n        ctx.color = tempitem.color;\n\n        ctx.float_to_color = this.floatToHSL;\n\n        ctx.resolution = this.props.edgeLength;\n\n        ctx.t = prevState.time;\n        // console.log(this.floatToHSL)\n\n        // return this.props.rule(n)\n\n        ctx.store = item.store;\n\n        // tempitem.state = this.props.rule(n)\n        // console.log(this.props.rule(n))\n\n        const value = this.props.rule(ctx);\n\n        // tempitem.store = ctx.store\n\n        // console.log(ctx)\n\n        if (typeof value === 'number' && !isNaN(value)) {\n          tempitem.state = value;\n        } else {\n          // this accounts if they directly set ctx.curr\n          tempitem.state = ctx.curr;\n        }\n\n        if (typeof value === 'boolean') {\n          tempitem.state = value ? 1 : 0;\n        }\n\n        if (ctx.color !== '') {\n          tempitem.color = ctx.color;\n        } else {\n          tempitem.color = '';\n        }\n\n        if (ctx.animate === true) {\n          tempitem.animate = true;\n        } else {\n          tempitem.animate = false;\n        }\n\n        if (ctx.invert === true) {\n          tempitem.invert = true;\n        } else {\n          tempitem.invert = false;\n        }\n\n        // //substitute rule here\n\n        // if(neighbors.filter(x => x==1).length  === 0){\n        // tempitem.state =  1 - tempitem.state\n        // }\n        // else{\n        // tempitem.state =  tempitem.state\n        // }\n\n        return tempitem;\n      });\n\n      return { data: newState, time: prevState.time + 1 };\n    });\n  }\n\n  flipItem (d) {\n    this.setState((prevState) => {\n      const newState = prevState.data.map((item, index) => {\n        if (index === d.index) {\n          const tempitem = { ...item };\n\n          if (tempitem.state < 0.5) {\n            tempitem.state = 1;\n          } else {\n            tempitem.state = 0;\n          }\n\n          // tempitem.state = 1 - tempitem.state;\n          // console.log(tempitem)\n          return tempitem;\n        } else {\n          return item;\n        }\n      });\n\n      return { data: newState };\n    });\n    this.updateVisDiscreteFlip();\n  }\n\n  drawChart () {\n    // get data right away so we dont have to worry about async issues\n\n    this.data = this.setup();\n    // console.log(this.edgeLength)\n    // console.log(\"hi\")\n    this.svg = d3.select('#' + this.props.id)\n      .attr('width', this.size)\n      .attr('height', this.size);\n    // .attr(\"width\", this.size + this.margin.left + this.margin.right)\n    // .attr(\"height\", this.size + this.margin.top + this.margin.bottom)\n\n    // console.log(this.svg.select('g').remove());\n\n    this.svg.selectAll('g').remove();\n    this.svg.selectAll('rect').remove();\n\n    this.viscontainer = this.svg.append('g');\n    // console.log(this.viscontainer);\n    // console.log(this.state.data)\n\n    const outerthis = this;\n\n    // console.log(this.state.data.length)\n\n    // background color\n    this.viscontainer\n      .append('g')\n      .selectAll('.background-rect')\n      .data(this.data)\n      .enter()\n      .append('rect')\n      .attr('class', 'background-rect')\n      .attr('fill', (d, i) => { return 'white'; })\n      .attr('stroke-width', 2)\n      .attr('stroke', 'black')\n      .attr('x', (d, i) => this.xScale(d.x))\n      .attr('y', (d, i) => this.yScale(d.y))\n      .attr('rx', (d, i) => this.squareLength * 0.2)\n      .attr('ry', (d, i) => this.squareLength * 0.2)\n      .attr('width', this.squareLength)\n      .attr('height', this.squareLength);\n\n    this.viscontainer\n      .append('g')\n      .selectAll('.main-rect')\n      .data(this.data)\n      .enter()\n      .append('rect')\n      .attr('class', 'main-rect')\n      .attr('id', (d, i) => d.index)\n    // .attr(\"fill\", (d,i) => {return d.state ? \"black\" : \"white\"})\n      .attr('fill', (d, i) => { return d.color === '' ? 'black' : d.color; })\n      .attr('fill-opacity', (d, i) => { return d.state; })\n      .attr('stroke-width', 2)\n      .attr('stroke', 'black')\n      .attr('x', (d, i) => this.xScale(d.x))\n      .attr('y', (d, i) => this.yScale(d.y))\n      .attr('rx', (d, i) => this.squareLength * 0.2)\n      .attr('ry', (d, i) => this.squareLength * 0.2)\n      .attr('width', this.squareLength)\n      .attr('height', this.squareLength);\n\n    if (!this.props.isMobile) {\n      this.viscontainer.selectAll('.main-rect')\n        .on('mousedown', (e, d) => {\n          // console.log(e)\n          // console.log(d)\n          outerthis.isDown = true;\n\n          outerthis.flipItem(d);\n        })\n        .on('mouseup', (e, d) => {\n          outerthis.isDown = false;\n        })\n        .on('mouseover', (e, d) => {\n          if (outerthis.isDown) {\n            outerthis.flipItem(d);\n          }\n        });\n    } else {\n      this.viscontainer.selectAll('.main-rect')\n        .on('touchstart', (e, d) => {\n          // console.log(e)\n          // console.log(d)\n          outerthis.isDown = true;\n\n          outerthis.flipItem(d);\n        })\n        .on('touchend', (e, d) => {\n          outerthis.isDown = false;\n        });\n      // figure out how to do touchmove and still flip the other tiles\n    }\n\n    // avoids when you click down on vis but move mouse out\n    d3.select('body')\n      .on('mouseup', (e, d) => {\n        outerthis.isDown = false;\n      });\n\n    // this.refresh();\n    this.setState({ ready: true });\n  }\n\n  componentDidMount () {\n    this.drawChart();\n  }\n\n  refresh () {\n    if (this.props.play && this.state.ready) {\n      this.addGifItem();\n      this.computeNextState();\n      this.updateVis();\n    }\n\n    setTimeout(this.refresh, this.props.refreshRate);\n  }\n\n  componentDidUpdate (prevProps) {\n    if (this.props.edgeLength !== prevProps.edgeLength) {\n      this.drawChart();\n    }\n\n    if (this.props.play !== prevProps.play && this.props.play) {\n      // we just switched the button on\n      // console.log(this.state.data)\n      const toExport = {};\n      for (let i = 0; i < this.state.data.length; i++) {\n        if (this.state.data[i].state !== 0) {\n          toExport[i] = this.state.data[i].state.toFixed(2);\n        }\n      }\n\n      this.props.setExportInitData(JSON.stringify(toExport));\n\n      this.gif = new GIF({\n\t    workers: 3,\n\t    quality: 1,\n\t    repeat: 0,\n\t    workerScript: process.env.PUBLIC_URL + '/gif.worker.js',\n\t    debug: true\n\t  });\n\n      this.state.existingBlobs.map((item) => {\n        // console.log(\"yo\");\n        // console.log(item)\n        URL.revokeObjectURL(item);\n      });\n\n      this.setState({\n        existingBlobs: [],\n        time: 0\n      });\n\n      this.props.setGifURL('');\n    }\n\n    if (this.props.play !== prevProps.play && !this.props.play) {\n      if (this.gif.frames.length > 0) {\n        this.gif.render();\n\n        const outerthis = this;\n\n        this.gif.on('finished', function (blob) {\n          const gifURL = (URL.createObjectURL(blob, { type: 'image/gif' }));\n\n          outerthis.setState((prevState) => {\n\t\t\t    return { existingBlobs: prevState.existingBlobs.concat(gifURL) };\n          });\n\n\t\t    outerthis.props.setGifURL(gifURL);\n        });\n      }\n      // console.log(this.gif)\n    }\n\n    // }\n  }\n\n  addGifItem () {\n    if (this.state.existingBlobs.length > 50) {\n      // we dont want the gif to keep growing in size, so stop if it gets too big\n      return;\n    }\n\n    // https://gist.github.com/veltman/1071413ad6b5b542a1a3\n    const img = new Image();\n    const serialized = new XMLSerializer().serializeToString(this.svg.node());\n    const svg = new Blob([serialized], { type: 'image/svg+xml' });\n    const url = URL.createObjectURL(svg);\n\n    this.setState((prevState) => {\n      return { existingBlobs: prevState.existingBlobs.concat(url) };\n\t    });\n\n    const outerthis = this;\n    // Onload, callback to move on to next frame\n    img.onload = function () {\n    \touterthis.gif.addFrame(img, {\n        delay: outerthis.props.refreshRate,\n\t\t    copy: true\n      });\n    };\n\n    img.src = url;\n  }\n\n  render () {\n    return (\n\t\t\t<svg id={this.props.id} key={this.props.edgeLength}>\n\t\t\t</svg>\n    );\n  }\n}\n\nexport default Visualization;\n","import './App.css';\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Slider from '@material-ui/core/Slider';\nimport Visualization from './Visualization';\nimport { withTheme } from '@material-ui/core/styles';\nimport { isMobile } from 'react-device-detect';\n\nimport AceEditor from 'react-ace';\n\nimport 'ace-builds/src-noconflict/mode-javascript';\nimport 'ace-builds/src-noconflict/theme-monokai';\n// import \"ace-builds/src-noconflict/ext-language_tools\"\n\nimport 'ace-builds/webpack-resolver';\n\nimport qs from 'qs';\n\nimport base64url from 'base64url';\n\nclass App extends React.Component {\n  constructor (props) {\n    super(props);\n    this.handleRuleChange = this.handleRuleChange.bind(this);\n    this.handleRuleChangeAce = this.handleRuleChangeAce.bind(this);\n    this.updateResolution = this.updateResolution.bind(this);\n    this.handlePlayChange = this.handlePlayChange.bind(this);\n    this.setExportInitData = this.setExportInitData.bind(this);\n    this.shareURL = this.shareURL.bind(this);\n    this.setGifURL = this.setGifURL.bind(this);\n    this.updateRefresh = this.updateRefresh.bind(this);\n    this.setStateFromQuery = this.setStateFromQuery.bind(this);\n    this.progressExample = this.progressExample.bind(this);\n\n    // this.downloadGif = this.downloadGif.bind(this);\n\n    // this.temp = this.temp.bind(this);\n\n    this.rawquery = window.location.search.slice(1);\n\n    if (this.rawquery === '' && window.location.hash.includes('?')) {\n      this.rawquery = window.location.hash;\n      this.rawquery = this.rawquery.slice(this.rawquery.indexOf('?') + 1);\n    }\n\n    console.log(this.rawquery);\n\n    this.query = qs.parse(this.rawquery);\n\n    fetch(process.env.PUBLIC_URL + '/examples.txt')\n      .then(response => response.text())\n      .then((text) => {\n        this.examples = text.split('\\n\\n');\n\n        // get rid of label at the beginning\n        this.examples = this.examples.map((item) => item.slice(item.indexOf(':') + 1));\n\n        console.log(this.examples);\n        this.curr_example = 0;\n\n        // no parameters means load example\n        if (Object.keys(this.query).length === 0) {\n          const query = qs.parse(this.examples[this.curr_example]);\n          this.setStateFromQuery(query);\n        }\n\n        this.setState({ curr_example: 0, examples: this.examples });\n      });\n\n    // defaults\n    this.refreshRate = 1000;\n    this.edgeLength = 10;\n    this.editorVal = `function rule(ctx){\n\n  }`;\n    this.play = false;\n    this.initdata = [];\n\n    if ('refreshRate' in this.query) {\n      this.refreshRate = parseInt(this.query.refreshRate);\n    }\n    if ('resolution' in this.query) {\n      this.edgeLength = parseInt(this.query.resolution);\n    }\n    if ('code' in this.query) {\n      this.editorVal = base64url.decode(this.query.code);\n    }\n    if ('play' in this.query && this.query.play === 'true') {\n      this.play = true;\n    }\n    if ('state' in this.query) {\n      try {\n        this.initdata = JSON.parse(this.query.state);\n      } catch (e) {\n        console.log(e);\n      }\n    }\n\n    // this.state = {'rule': }\n\n    this.initrule = this.getFunctionFromString(this.editorVal);\n\n    this.state = {\n      rule: this.initrule,\n      edgeLength: this.edgeLength,\n      play: this.play,\n      editorVal: this.editorVal,\n      refreshRate: this.refreshRate,\n      exportInitData: '',\n      gifURL: ''\n    };\n\n    // console.log(this.initdata)\n\n    // if(this.initdata.length === this.edgeLength){\n    this.state.initdata = this.initdata;\n    // }\n\n    if (isMobile) {\n      this.viswidth = window.innerWidth * 0.65;\n      this.editorwidth = window.innerWidth * 0.7;\n      this.fontSize = 10;\n    } else {\n      this.viswidth = window.innerHeight * 0.4;\n      this.editorwidth = window.innerWidth * 0.4;\n      this.fontSize = 14;\n    }\n  }\n\n  setStateFromQuery (query) {\n    console.log(query);\n\n    if ('refreshRate' in query) {\n      this.setState({ refreshRate: parseInt(query.refreshRate) });\n    }\n    if ('resolution' in query) {\n      this.setState({ edgeLength: parseInt(query.resolution) });\n    }\n    if ('code' in query) {\n      const editorVal = base64url.decode(query.code);\n      this.setState({ editorVal: editorVal });\n      this.setState({ rule: this.getFunctionFromString(editorVal) });\n    }\n    if ('play' in query && query.play === 'true') {\n      this.setState({ play: true });\n    } else if ('play' in query && query.play === 'false') {\n      this.setState({ play: false });\n    }\n    if ('state' in query && query.state.length > 0) {\n      try {\n        this.setState({ initdata: JSON.parse(query.state) });\n      } catch (e) {\n        console.log(e);\n      }\n    } else {\n      // if no state is set\n      this.initdata = {};\n      for (let i = 0; i < this.edgeLength ** 2; i++) {\n        this.initdata[i] = 0;\n      }\n      this.setState({ initdata: this.initdata });\n    }\n  }\n\n  progressExample () {\n    this.setState((prevState) => {\n      const newExampleInd = (prevState.curr_example + 1) % prevState.examples.length;\n      this.setStateFromQuery(qs.parse(prevState.examples[newExampleInd]));\n      return { curr_example: newExampleInd };\n    });\n  }\n\n  setExportInitData (val) {\n    this.setState({\n      exportInitData: val\n    });\n  }\n\n  updateRefresh (e, val) {\n    console.log(val);\n    this.setState({\n      refreshRate: val\n    });\n  }\n\n  getFunctionFromString (val) {\n    try {\n      const f = new Function('x', `\n        try{\n          // ${val.replace(/\\n/g, '')};\n          let f = ${val}\n\n          return f(x);\n        }\n        catch(error){\n          return error;\n        }\n        `);\n      // let f = null;\n\n      return f;\n      // this.setState({'rule': f});\n    } catch (error) {\n      console.log(error);\n    }\n\n    if (!this.state) {\n      return new Function('x', 'return null;');\n    }\n\n    // return whatever is existing as a rule\n\n    return this.state.rule;\n  }\n\n  handleRuleChange (e) {\n    console.log(e);\n    // console.log(e.target.value)\n\n    try {\n      const f = new Function('ctx', `\n        try{\n          ${e.target.value.replace(/\\n/g, '')};\n        }\n        catch(error){\n          return error;\n        }\n        `);\n\n      this.setState({ rule: f });\n\n      console.log(f);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  handleRuleChangeAce (val) {\n    this.setState({ editorVal: val });\n    // val = val.slice(val.indexOf('{') + 1, val.indexOf('}')).trim();\n    console.log(val);\n\n    console.log(base64url.encode(val));\n\n    const f = this.getFunctionFromString(val);\n\n    this.setState({ rule: f });\n  }\n\n  updateResolution (e, val) {\n    this.setState({\n      edgeLength: val,\n      initdata: []\n    });\n  }\n\n  handlePlayChange (e) {\n    this.setState((prevState) => {\n      return ({\n        play: !prevState.play\n      });\n    });\n  }\n\n  shareURL () {\n    const params = {};\n\n    params.refreshRate = this.state.refreshRate;\n    params.play = true;\n    params.resolution = this.state.edgeLength;\n    params.code = base64url.encode(this.state.editorVal);\n    params.state = this.state.exportInitData;\n\n    const exportQs = qs.stringify(params);\n\n    let currURL = window.location.toString();\n\n    currURL = currURL.slice(0, currURL.lastIndexOf('/'));\n\n    const newURL = currURL + '?' + exportQs;\n\n    console.log(newURL);\n\n    window.history.pushState('', '', newURL);\n\n    window.prompt('Copy to share (Ctrl+C, Enter)', newURL);\n  }\n\n  setGifURL (item) {\n    this.setState({ gifURL: item });\n  }\n\n  // temp(e){\n  //   document.getElementsByClassName(\"ace_text-input\")[0]\n  //     .innerHTML = \"hi\"\n  // }\n\n  render () {\n    return (\n      <div className=\"App\">\n\n        <div id='vis-container'>\n          { isMobile &&\n            <div>\n            <p>(Scroll down for the editor!)</p>\n            </div>\n          }\n\n          <Visualization id=\"viz\" edgeLength={this.state.edgeLength} size={this.viswidth} rule={this.state.rule}\n           play={this.state.play} refreshRate={this.state.refreshRate} initdata={this.state.initdata}\n           setExportInitData={this.setExportInitData} setGifURL={this.setGifURL}\n           isMobile={isMobile}/>\n\n           <p style={{\n             color: this.props.theme.palette.lightText.main,\n             fontFamily: this.props.theme.typography.fontFamily\n           }}>\n              Refresh Rate (ms)\n           </p>\n\n           <Slider\n            defaultValue={this.refreshRate}\n            valueLabelDisplay=\"auto\"\n            step={100}\n            marks\n            min={100}\n            max={2000}\n            value={this.state.refreshRate}\n            style={{ width: '50%' }}\n            onChange={this.updateRefresh}\n           />\n\n           <p style={{\n             color: this.props.theme.palette.lightText.main,\n             fontFamily: this.props.theme.typography.fontFamily\n           }}>\n              Resolution\n           </p>\n\n          <Slider\n            defaultValue={this.edgeLength}\n            valueLabelDisplay=\"auto\"\n            step={1}\n            marks\n            min={4}\n            max={20}\n            value={this.state.edgeLength}\n            onChange={this.updateResolution}\n            style={{ width: '50%' }}/>\n\n          <br/>\n          <br/>\n\n            <Button variant=\"contained\" color=\"primary\" onClick={this.handlePlayChange}>\n              {this.state.play ? 'Pause' : 'Play'}\n            </Button>\n\n          <br/>\n          <br/>\n          <Button variant=\"contained\" color=\"primary\" onClick={this.shareURL}>\n              Share URL\n            </Button>\n\n          <br/>\n          <br/>\n\n          <a target=\"_blank\" href={this.state.gifURL === '' ? false : this.state.gifURL} download=\"evolution.gif\" style={{ color: 'inherit', 'text-decoration': 'none' }}>\n            <Button variant=\"contained\" color=\"primary\" download={this.state.gifURL} disabled={this.state.gifURL === ''}\n            target=\"_blank\">\n                {this.state.gifURL !== '' ? 'Download as GIF' : 'GIF not ready'}\n              </Button>\n          </a>\n\n        </div>\n        {\n        // <TextField variant=\"outlined\" onChange={this.handleRuleChange} multiline={true}/>\n        }\n        <div id='controls-container'>\n\n          <AceEditor\n            // placeholder=\"Placeholder Text\"\n            mode=\"javascript\"\n            theme=\"monokai\"\n            name=\"editor\"\n            // onLoad={this.handleRuleChangeAce}\n            onChange={this.handleRuleChangeAce}\n            fontSize={this.fontSize}\n            showPrintMargin={true}\n            showGutter={true}\n            highlightActiveLine={true}\n            value={this.state.editorVal}\n            height={window.innerHeight * 0.5}\n            setOptions={{\n              enableBasicAutocompletion: true,\n              enableLiveAutocompletion: true,\n              enableSnippets: false,\n              showLineNumbers: !isMobile,\n              showGutter: !isMobile,\n              tabSize: 2\n            }}\n\n            width={this.editorwidth + 'px'}\n\n            />\n\n            <Button variant=\"contained\" color=\"primary\" onClick={this.progressExample}>\n              Next Example\n            </Button>\n\n            <br/>\n            <br/>\n\n            <Button variant=\"contained\" color=\"secondary\" href=\"#help\">\n              Help/More Info\n            </Button>\n\n          </div>\n      </div>\n    );\n  }\n}\n\nexport default withTheme(App);\n","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport gfm from 'remark-gfm';\nimport Button from '@material-ui/core/Button';\nimport { isMobile } from 'react-device-detect';\n\nclass MoreInfo extends React.Component {\n  constructor (props) {\n    super(props);\n    this.state = { text: '' };\n\n    fetch(process.env.PUBLIC_URL + '/info.md')\n      .then(response => response.text())\n      .then((text) => {\n        this.setState({ text: text });\n      });\n\n    if (isMobile) {\n      this.margin = 10;\n    } else {\n      this.margin = 20;\n    }\n  }\n\n  render () {\n    return (\n\t\t<div style={{ marginLeft: this.margin + 'vw', marginRight: this.margin + 'vw', color: 'white' }}>\n\t\t\t<ReactMarkdown plugins={[gfm]}>\n\t\t\t\t{this.state.text}\n\t\t\t</ReactMarkdown>\n\n\t\t\t<div style={{ textAlign: 'center', marginTop: '2vh' }}>\n\t\t\t<Button variant=\"contained\" color=\"primary\" href=\"#\">\n              Back\n            </Button>\n            </div>\n\t\t</div>);\n  }\n}\n\nexport default MoreInfo;\n","import React from 'react';\nimport App from './App';\nimport MoreInfo from './MoreInfo';\nimport { createMuiTheme, ThemeProvider, withTheme } from '@material-ui/core/styles';\n\nimport {\n  // BrowserRouter,\n  HashRouter,\n  Switch,\n  Route\n  // Link,\n  // useLocation\n} from 'react-router-dom';\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#9B6A6C'\n    },\n    secondary: {\n      main: '#6DC0D5'\n    },\n    error: {\n    \tmain: '#c1666b'\n    },\n    warning: {\n    \tmain: '#d4b843'\n    },\n    black: {\n    \tmain: '#020202'\n    },\n    lightText: {\n    \tmain: '#F7F0F5'\n    }\n  },\n  typography: {\n  \tfontFamily: \"'Oswald'\"\n  }\n});\n\nclass Router extends React.Component {\n  render () {\n    return (\n\n\t\t\t<HashRouter>\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route exact path=\"/\">\n\t\t\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t\t\t<App/>\n\t\t\t\t\t\t</ThemeProvider>\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route exact path=\"/help\">\n\t\t\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t\t\t<MoreInfo/>\n\t\t\t\t\t\t</ThemeProvider>\n\t\t\t\t\t</Route>\n\t\t\t\t</Switch>\n\t\t\t</HashRouter>\n    );\n  }\n}\n\nexport default withTheme(Router);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n// import App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport Router from './Router';\n\n// import Router from './Router'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}